<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>‚òÖ Diamond Blitz Slot ‚òÖ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root {
    --primary: #1a1a2e;
    --secondary: #16213e;
    --accent: #00ff88;
    --gold: #ffd700;
    --reel-bg: rgba(0,0,0,0.7);
    --border: #00ff88;
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    color: white;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
  }

  header {
    text-align: center;
    padding: 20px;
    background: rgba(0,0,0,0.5);
    width: 100%;
    border-bottom: 2px solid var(--accent);
  }

  h1 {
    font-size: 3rem;
    background: linear-gradient(90deg, #ffd700, #ff6b6b, #00ff88);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 20px rgba(0,255,136,0.5);
  }

  .game-container {
    margin: 20px auto;
    padding: 20px;
    background: var(--secondary);
    border-radius: 20px;
    box-shadow: 0 0 40px rgba(0,255,136,0.3);
    max-width: 900px;
    width: 95%;
  }

  .slot-machine {
    position: relative;
    background: var(--reel-bg);
    border: 8px solid var(--border);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: inset 0 0 60px rgba(0,0,0,0.8), 0 0 30px var(--accent);
  }

  .reels {
    display: flex;
    height: 400px;
    overflow: hidden;
    position: relative;
  }

  .reel {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    overflow: hidden;
    position: relative;
  }

  .symbol {
    width: 120px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 70px;
    user-select: none;
    transition: transform 0.1s;
  }

  .spinning {
    animation: spinBlur 0.15s linear infinite;
  }

  @keyframes spinBlur {
    0% { filter: blur(0px); }
    50% { filter: blur(8px); }
    100% { filter: blur(0px); }
  }

  .paylines-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 10;
  }

  .payline {
    stroke: #ffd700;
    stroke-width: 5;
    fill: none;
    stroke-linecap: round;
    opacity: 0;
    transition: opacity 0.5s;
  }

  .payline.active {
    opacity: 0.9;
    animation: pulse 1.5s infinite;
  }

  @keyframes pulse {
    0%,100% { stroke: #ffd700; }
    50% { stroke: #ff0000; }
  }

  .controls {
    text-align: center;
    padding: 20px;
    background: rgba(0,0,0,0.6);
    border-radius: 15px;
    margin-top: 20px;
  }

  button {
    padding: 15px 40px;
    font-size: 1.5rem;
    background: linear-gradient(45deg, #00ff88, #00d4ff);
    border: none;
    border-radius: 50px;
    color: black;
    font-weight: bold;
    cursor: pointer;
    margin: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    transition: all 0.3s;
  }

  button:hover { transform: scale(1.05); }
  button:active { transform: scale(0.98); }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  .info {
    display: flex;
    justify-content: space-around;
    margin: 20px 0;
    flex-wrap: wrap;
  }

  .stat {
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 10px;
    min-width: 150px;
    text-align: center;
    margin: 10px;
  }

  .payout-table {
    margin-top: 30px;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 15px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }

  th, td {
    padding: 12px;
    border: 1px solid var(--accent);
    text-align: center;
  }

  th { background: var(--accent); color: black; }

  .win-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 5rem;
    font-weight: bold;
    color: #ffd700;
    text-shadow: 0 0 30px #ff0000;
    opacity: 0;
    pointer-events: none;
    z-index: 20;
    animation: bigwin 3s ease-out forwards;
  }

  @keyframes bigwin {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
    30% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    60% { transform: translate(-50%, -50%) scale(0.9); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(3); }
  }
</style>
</head>
<body>

<header>
  <h1>DIAMOND BLITZ</h1>
  <p>5√ó4 Slot ‚Ä¢ 50 Paylines ‚Ä¢ High Volatility</p>
</header>

<div class="game-container">
  <div class="slot-machine">
    <svg class="paylines-overlay" viewBox="0 0 600 400">
      <!-- Paylines will be drawn here dynamically -->
    </svg>

    <div class="reels" id="reels">
      <!-- Reels generated by JS -->
    </div>

    <div class="win-message" id="bigwin"></div>
  </div>

  <div class="info">
    <div class="stat">
      <div>Balance</div>
      <div id="balance">10000</div>
    </div>
    <div class="stat">
      <div>Bet</div>
      <div id="bet">50</div>
    </div>
    <div class="stat">
      <div>Last Win</div>
      <div id="lastwin">0</div>
    </div>
    <div class="stat">
      <div>Total Win</div>
      <div id="totalwin">0</div>
    </div>
  </div>

  <div class="controls">
    <button id="spinBtn">SPIN</button>
    <button id="maxBetBtn">MAX BET</button>
    <button onclick="adjustBet(-10)">-10</button>
    <button onclick="adjustBet(10)">+10</button>
  </div>

  <div class="payout-table">
    <h2>‚òÖ Payout Table ‚òÖ</h2>
    <table>
      <tr><th>Symbol</th><th>5√ó</th><th>4√ó</th><th>3√ó</th></tr>
      <tr><td>üíé Diamond (Wild)</td><td>1000</td><td>300</td><td>100</td></tr>
      <tr><td>‚≠ê Star</td><td>500</td><td>150</td><td>50</td></tr>
      <tr><td>üîî Bell</td><td>300</td><td>100</td><td>30</td></tr>
      <tr><td>7Ô∏è‚É£ Seven</td><td>200</td><td>80</td><td>25</td></tr>
      <tr><td>üçâ Melon</td><td>150</td><td>60</td><td>20</td></tr>
      <tr><td>üçã Lemon</td><td>100</td><td>40</td><td>15</td></tr>
      <tr><td>üçí Cherry</td><td>80</td><td>30</td><td>10</td></tr>
    </table>
    <p><small>Wild substitutes for all symbols ‚Ä¢ Wins pay left to right on active paylines</small></p>
  </div>
</div>

<script>
// ==================== CONFIGURATION ====================
const REELS = 5;
const ROWS = 4;
const VISIBLE_ROWS = 4;
const SYMBOLS = ['üçí', 'üçã', 'üçâ', '7Ô∏è‚É£', 'üîî', '‚≠ê', 'üíé']; // üíé is Wild
const SYMBOL_VALUES = { 'üíé':7, '‚≠ê':6, 'üîî':5, '7Ô∏è‚É£':4, 'üçâ':3, 'üçã':2, 'üçí':1 };

const PAYTABLE = {
  'üíé': [0, 0, 100, 300, 1000],
  '‚≠ê': [0, 0, 50, 150, 500],
  'üîî': [0, 0, 30, 100, 300],
  '7Ô∏è‚É£': [0, 0, 25, 80, 200],
  'üçâ': [0, 0, 20, 60, 150],
  'üçã': [0, 0, 15, 40, 100],
  'üçí': [0, 0, 10, 30, 80]
};

const PAYLINES = [
  [5,5,5,5,5],     // Middle horizontal
  [0,0,0,0,0],     // Top horizontal
  [10,10,10,10,10],// Bottom horizontal
  [1,1,1,1,1],     // Second row
  [0,1,2,1,0],     // V shape
  [10,9,8,9,10],   // Inverted V
  [0,5,10,5,0],    // W shape up
  [10,5,0,5,10],   // M shape
  [0,9,10,1,0],    // Zigzag
  [10,1,0,9,10],   // Reverse zigzag
  // Add more up to 50... here are 10 for demo (full list in real game)
];

for (let i = 10; i < 50; i++) {
  PAYLINES.push(PAYLINES[i % 10]); // Duplicate for demo
}

// ==================== STATE ====================
let balance = 10000;
let bet = 50;
let isSpinning = false;
let grid = [];

// ==================== DOM ELEMENTS ====================
const reelsContainer = document.getElementById('reels');
const spinBtn = document.getElementById('spinBtn');
const bigwin = document.getElementById('bigwin');

// ==================== INIT ====================
function init() {
  reelsContainer.innerHTML = '';
  grid = [];

  for (let r = 0; r < REELS; r++) {
    const reel = document.createElement('div');
    reel.className = 'reel';
    reel.id = `reel${r}`;

    // Create strip with extra symbols for smooth spin
    const strip = [];
    for (let i = 0; i < ROWS + 20; i++) {
      const symbol = document.createElement('div');
      symbol.className = 'symbol';
      symbol.textContent = getRandomSymbol();
      reel.appendChild(symbol);
      strip.push(symbol);
    }
    reelsContainer.appendChild(reel);
    grid.push(strip);
  }

  drawPaylines();
  updateUI();
}

function getRandomSymbol() {
  const weights = [15, 14, 12, 8, 6, 4, 2]; // Cherry most common, Diamond rare
  let total = weights.reduce((a,b)=>a+b,0);
  let rand = Math.random() * total;
  let sum = 0;
  for (let i = 0; i < SYMBOLS.length; i++) {
    sum += weights[i];
    if (rand < sum) return SYMBOLS[i];
  }
  return 'üíé';
}

// ==================== PAYLINES SVG ====================
function drawPaylines() {
  const svg = document.querySelector('.paylines-overlay');
  svg.innerHTML = '';

  const w = 120, h = 100;
  const offsetX = 0, offsetY = 0;

  PAYLINES.forEach((line, idx) => {
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    let d = `M ${offsetX + w/2} ${offsetY + h/2 + line[0]*h}`;
    for (let i = 1; i < 5; i++) {
      d += ` L ${offsetX + w/2 + i*w} ${offsetY + h/2 + line[i]*h}`;
    }
    path.setAttribute('d', d);
    path.className = 'payline';
    path.id = `line${idx}`;
    svg.appendChild(path);
  });
}

// ==================== SPIN LOGIC ====================
async function spin() {
  if (isSpinning || balance < bet) return;
  isSpinning = true;
  spinBtn.disabled = true;
  balance -= bet;
  updateUI();

  // Clear old wins
  document.querySelectorAll('.payline.active').forEach(el => el.classList.remove('active'));
  bigwin.style.opacity = 0;

  const stopPositions = [];
  const spinDuration = 2000 + Math.random() * 2000;

  // Start spinning all reels
  document.querySelectorAll('.reel').forEach(reel => {
    reel.classList.add('spinning');
  });

  // Staggered stop
  for (let r = 0; r < REELS; r++) {
    const delay = 300 + r * 200;
    setTimeout(() => {
      document.getElementById(`reel${r}`).classList.remove('spinning');
      const stopPos = Math.floor(Math.random() * 1000);
      stopPositions.push(stopPos);
      const reel = grid[r];
      const offset = (stopPos % reel.length) * -100;
      reel.forEach((sym, i) => {
        sym.style.transform = `translateY(${offset + i*100}px)`;
      });
    }, spinDuration + delay);
  }

  // Wait for all to stop
  await new Promise(res => setTimeout(res, spinDuration + REELS * 200 + 500));

  // Final grid (visible part)
  const visibleGrid = grid.map(reel => {
    const firstVisible = stopPositions[reel === grid[0] ? grid.indexOf(reel) : grid.indexOf(reel)] % reel.length;
    return reel.slice(firstVisible, firstVisible + ROWS).map(s => s.textContent);
  });

  // Evaluate wins
  const wins = evaluateWins(visibleGrid);
  let totalWin = wins.reduce((sum, w) => sum + w.amount, 0);

  if (totalWin > 0) {
    balance += totalWin;
    document.getElementById('lastwin').textContent = totalWin;
    document.getElementById('totalwin').textContent = (parseInt(document.getElementById('totalwin').textContent) + totalWin);

    // Show winning lines
    wins.forEach(w => {
      document.getElementById(`line${w.line}`).classList.add('active');
    });

    if (totalWin > bet * 20) {
      bigwin.textContent = `BIG WIN! ${totalWin}`;
      bigwin.style.opacity = 1;
    }
  }

  updateUI();
  isSpinning = false;
  spinBtn.disabled = false;
}

function evaluateWins(grid) {
  const wins = [];

  PAYLINES.forEach((pattern, lineIdx) => {
    const symbols = pattern.map((row, col) => grid[col][row % ROWS]);
    let count = 1;
    let symbol = symbols[0];

    // Wild substitution
    if (symbol !== 'üíé') {
      for (let i = 1; i < 5; i++) {
        if (symbols[i] === 'üíé' || symbols[i] === symbol) {
          count++;
        } else break;
      }
    } else {
      // Wild start - find best paying
      count = 5;
      symbol = getBestPaying(symbols);
    }

    if (count >= 3) {
      const payout = PAYTABLE[symbol][count] * (bet / 50); // Scale with bet
      wins.push({ line: lineIdx, symbol, count, amount: payout });
    }
  });

  return wins;
}

function getBestPaying(symbols) {
  let best = 'üçí';
  for (const s of symbols) {
    if (SYMBOL_VALUES[s] > SYMBOL_VALUES[best]) best = s;
  }
  return best;
}

// ==================== UI ====================
function updateUI() {
  document.getElementById('balance').textContent = balance.toLocaleString();
  document.getElementById('bet').textContent = bet;
}

function adjustBet(amount) {
  const newBet = bet + amount;
  if (newBet >= 10 && newBet <= 500 && newBet <= balance) {
    bet = newBet;
    updateUI();
  }
}

document.getElementById('maxBetBtn').onclick = () => {
  bet = Math.min(500, balance - (balance % 50));
  updateUI();
};

// ==================== START ====================
spinBtn.onclick = spin;
init();
</script>

</body>
</html>
