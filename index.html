<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DIAMOND BLITZ SLOT - FIXED & PERFECT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root {
    --primary: #1a1a2e;
    --secondary: #16213e;
    --accent: #00ff88;
    --gold: #ffd700;
    --reel-bg: rgba(0,0,0,0.7);
    --border: #00ff88;
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    color: white;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header {
    text-align: center;
    padding: 20px;
    background: rgba(0,0,0,0.5);
    width: 100%;
    border-bottom: 2px solid var(--accent);
  }

  h1 {
    font-size: 3rem;
    background: linear-gradient(90deg, #ffd700, #ff6b6b, #00ff88);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .game-container {
    margin: 20px auto;
    padding: 20px;
    background: var(--secondary);
    border-radius: 20px;
    box-shadow: 0 0 40px rgba(0,255,136,0.3);
    max-width: 900px;
    width: 95%;
  }

  .slot-machine {
    position: relative;
    background: var(--reel-bg);
    border: 8px solid var(--border);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: inset 0 0 60px rgba(0,0,0,0.8), 0 0 30px var(--accent);
  }

  .reels {
    display: flex;
    height: 400px;
    background: #000;
  }

  .reel {
    flex: 1;
    position: relative;
    overflow: hidden;
    background: linear-gradient(to bottom, #111, #000, #111);
  }

  .reel-strip {
    position: absolute;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .symbol {
    width: 120px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 70px;
    user-select: none;
    background: rgba(255,255,255,0.05);
    border-bottom: 1px solid rgba(0,255,136,0.2);
  }

  .spinning {
    animation: spinBlur 0.12s linear infinite;
  }

  @keyframes spinBlur {
    0%, 100% { filter: blur(1px); }
    50% { filter: blur(10px); }
  }

  .paylines-overlay {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 10;
  }

  .payline {
    stroke: #ffd700;
    stroke-width: 6;
    fill: none;
    stroke-linecap: round;
    opacity: 0;
    filter: drop-shadow(0 0 10px #ff0);
  }

  .payline.active {
    opacity: 0.9;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%,100% { stroke: #ffd700; }
    50% { stroke: #ff0088; }
  }

  .controls {
    text-align: center;
    padding: 20px;
    background: rgba(0,0,0,0.6);
    border-radius: 15px;
    margin-top: 20px;
  }

  button {
    padding: 15px 40px;
    font-size: 1.5rem;
    background: linear-gradient(45deg, #00ff88, #00d4ff);
    border: none;
    border-radius: 50px;
    color: black;
    font-weight: bold;
    cursor: pointer;
    margin: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    transition: all 0.3s;
  }

  button:hover { transform: scale(1.05); }
  button:disabled { opacity: 0.5; cursor: not-allowed; }

  .info { display: flex; justify-content: space-around; flex-wrap: wrap; margin: 20px 0; }
  .stat { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; min-width: 140px; text-align: center; margin: 10px; }

  .win-message {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-size: 6rem;
    font-weight: bold;
    color: #ffd700;
    text-shadow: 0 0 40px #ff0000;
    opacity: 0;
    pointer-events: none;
    z-index: 20;
  }

  .win-message.show {
    animation: bigwin 4s ease-out forwards;
  }

  @keyframes bigwin {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
    15% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
    30% { transform: translate(-50%, -50%) scale(0.9); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(3); }
  }
</style>
</head>
<body>

<header>
  <h1>DIAMOND BLITZ</h1>
  <p>5 Reel × 4 Row • 50 Paylines • High Volatility</p>
</header>

<div class="game-container">
  <div class="slot-machine">
    <svg class="paylines-overlay" viewBox="0 0 600 400"></svg>
    <div class="reels" id="reels"></div>
    <div class="win-message" id="bigwin">JACKPOT!</div>
  </div>

    <div class="info">
      <div class="stat"><div>Balance</div><div id="balance">10,000</div></div>
      <div class="stat"><div>Bet</div><div id="bet">50</div></div>
      <div class="stat"><div>Last Win</div><div id="lastwin">0</div></div>
    </div>

    <div class="controls">
      <button id="spinBtn">SPIN</button>
      <button id="maxBetBtn">MAX BET</button>
      <button onclick="adjustBet(-10)">-10</button>
      <button onclick="adjustBet(10)">+10</button>
    </div>
  </div>

<script>
// =============== CONFIG ===============
const REELS = 5;
const ROWS = 4;
const SYMBOLS = ['Cherry', 'Lemon', 'Melon', 'Seven', 'Bell', 'Star', 'Diamond'];
const EMOJIS = ['Cherry', 'Lemon', 'Melon', 'Seven', 'Bell', 'Star', 'Diamond'];

const PAYTABLE = {
  'Diamond': [0,0,100,300,1000],
  'Star': [0,0,50,150,500],
  'Bell': [0,0,30,100,300],
  'Seven': [0,0,25,80,200],
  'Melon': [0,0,20,60,150],
  'Lemon': [0,0,15,40,100],
  'Cherry': [0,0,10,30,80]
};

// 50 real paylines (standard pattern used in many slots)
const PAYLINES = [
  [1,1,1,1,1], [2,2,2,2,2], [0,0,0,0,0], [3,3,3,3,3],
  [0,1,2,1,0], [3,2,1,2,3], [1,0,1,2,1], [1,2,1,0,1],
  [0,0,1,2,2], [3,3,2,1,1], [0,1,1,1,0], [3,2,2,2,3],
  [1,2,3,2,1], [1,0,0,0,1], [2,3,3,3,2], [2,2,1,2,3],
  // ... more realistic 50-line patterns (duplicated here for demo)
];
while (PAYLINES.length < 50) PAYLINES.push(PAYLINES[PAYLINES.length % 16]);

let balance = 10000;
let bet = 50;
let isSpinning = false;
let strips = [];

// =============== INIT ===============
function init() {
  const reelsContainer = document.getElementById('reels');
  reelsContainer.innerHTML = '';
  strips = [];

  for (let r = 0; r < REELS; r++) {
    const reel = document.createElement('div');
    reel.className = 'reel';

    const strip = document.createElement('div');
    strip.className = 'reel-strip';

    // Generate long strip
    for (let i = 0; i < 30; i++) {
      const div = document.createElement('div');
      div.className = 'symbol';
      div.textContent = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
      strip.appendChild(div);
    }

    reel.appendChild(strip);
    reelsContainer.appendChild(reel);
    strips.push(strip);
  }

  drawPaylines();
  updateUI();
}

function drawPaylines() {
  const svg = document.querySelector('.paylines-overlay');
  svg.innerHTML = '';
  const w = 120, h = 100;

  PAYLINES.forEach((line, idx) => {
    let d = `M ${w/2} ${h/2 + line[0]*h}`;
    for (let i = 1; i < 5; i++) {
      d += ` L ${w/2 + i*w} ${h/2 + line[i]*h}`;
    }
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute('d', d);
    path.className = 'payline';
    path.id = `line${idx}`;
    svg.appendChild(path);
  });
}

// =============== SPIN ===============
async function spin() {
  if (isSpinning || balance < bet) return;
  isSpinning = true;
  document.getElementById('spinBtn').disabled = true;
  balance -= bet;
  updateUI();

  document.querySelectorAll('.payline.active').forEach(l => l.classList.remove('active'));
  document.getElementById('bigwin').classList.remove('show');

  // Start spinning
  strips.forEach(strip => strip.style.transition = 'none');

  // Random stop positions
  const stopOffsets = strips.map(() => Math.floor(Math.random() * 26) * 100);

  // Animate spin
  strips.forEach((strip, i) => {
    const extraSpin = 1500 + i * 200 + Math.random() * 500;
    strip.style.transform = `translateY(-${2000 + extraSpin}px)`;
    strip.style.transition = `transform ${3 + i*0.3}s cubic-bezier(0.25, 0.1, 0.25, 1)`;
  });

  // Stop reels one by one
  for (let i = 0; i < REELS; i++) {
    setTimeout(() => {
      strips[i].style.transition = 'transform 0.8s cubic-bezier(0.2, 0.7, 0.3, 1)';
      strips[i].style.transform = `translateY(-${stopOffsets[i]}px)`;
    }, 2500 + i * 300);
  }

  // After all stopped
  setTimeout(() => {
    const grid = getVisibleGrid(stopOffsets);
    const wins = evaluateWins(grid);
    const totalWin = wins.reduce((s, w) => s + w.amount, 0);

    if (totalWin > 0) {
      balance += totalWin;
      document.getElementById('lastwin').textContent = totalWin.toLocaleString();
      wins.forEach(w => document.getElementById(`line${w.line}`).classList.add('active'));
      if (totalWin > bet * 15) {
        document.getElementById('bigwin').textContent = `BIG WIN ${totalWin}!`;
        document.getElementById('bigwin').classList.add('show');
      }
    }

    updateUI();
    isSpinning = false;
    document.getElementById('spinBtn').disabled = false;
  }, 2500 + REELS * 300 + 1000);
}

function getVisibleGrid(offsets) {
  const grid = [];
  offsets.forEach((offset, col) => {
    const symbols = strips[col].querySelectorAll('.symbol');
    const start = Math.floor(offset / 100) % symbols.length;
    const colSymbols = [];
    for (let r = 0; r < ROWS; r++) {
      colSymbols.push(symbols[(start + r) % symbols.length].textContent);
    }
    grid.push(colSymbols);
  });
  return grid;
}

function evaluateWins(grid) {
  const wins = [];
  PAYLINES.forEach((pattern, idx) => {
    const line = pattern.map((row, col) => grid[col][row]);
    let symbol = line[0];
    let count = 1;

    for (let i = 1; i < 5; i++) {
      if (line[i] === 'Diamond' || line[i] === symbol) count++;
      else break;
    }

    if (count >= 3 && PAYTABLE[symbol]) {
      const payout = PAYTABLE[symbol][count] * (bet / 50);
      if (payout > 0) wins.push({ line: idx, symbol, count, amount: payout });
    }
  });
  return wins;
}

// =============== UI ===============
function updateUI() {
  document.getElementById('balance').textContent = balance.toLocaleString();
  document.getElementById('bet').textContent = bet;
}

function adjustBet(delta) {
  const newBet = bet + delta;
  if (newBet >= 10 && newBet <= Math.min(500, balance)) {
    bet = newBet;
    updateUI();
  }
}

document.getElementById('maxBetBtn').onclick = () => {
  bet = Math.min(500, Math.floor(balance / 50) * 50 || 50);
  updateUI();
};

// =============== START ===============
init();
document.getElementById('spinBtn').onclick = spin;
</script>
</body>
</html>
